{"id":"lJ9Q","dependencies":[{"name":"C:\\Users\\Shadthepro\\Desktop\\my-demo-app\\node_modules\\@inrupt\\solid-client-authn-core\\dist\\util\\handlerPattern\\AggregateHandler.js.map","includedInParent":true,"mtime":499162500000},{"name":"C:\\Users\\Shadthepro\\Desktop\\my-demo-app\\node_modules\\@inrupt\\solid-client-authn-core\\src\\util\\handlerPattern\\AggregateHandler.ts","includedInParent":true,"mtime":499162500000},{"name":"C:\\Users\\Shadthepro\\Desktop\\my-demo-app\\package.json","includedInParent":true,"mtime":1632614243327},{"name":"C:\\Users\\Shadthepro\\Desktop\\my-demo-app\\node_modules\\@inrupt\\solid-client-authn-core\\package.json","includedInParent":true,"mtime":1632612132798},{"name":"../../errors/InruptError","loc":{"line":6,"column":46},"parent":"C:\\Users\\Shadthepro\\Desktop\\my-demo-app\\node_modules\\@inrupt\\solid-client-authn-core\\dist\\util\\handlerPattern\\AggregateHandler.js","resolved":"C:\\Users\\Shadthepro\\Desktop\\my-demo-app\\node_modules\\@inrupt\\solid-client-authn-core\\dist\\errors\\InruptError.js"}],"generated":{"js":"\"use strict\";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,\"__esModule\",{value:!0});const r=e(require(\"../../errors/InruptError\"));class t{constructor(e){this.handleables=e}async getProperHandler(e){const r=await Promise.all(this.handleables.map(r=>r.canHandle(...e)));for(let t=0;t<r.length;t+=1)if(r[t])return this.handleables[t];return null}async canHandle(...e){return null!==await this.getProperHandler(e)}async handle(...e){const t=await this.getProperHandler(e);if(t)return t.handle(...e);throw new r.default(`[${this.constructor.name}] cannot find a suitable handler for: ${e.map(e=>{try{return JSON.stringify(e)}catch(r){return e.toString()}}).join(\", \")}`)}}exports.default=t;"},"sourceMaps":{"js":{"mappings":[{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":31,"column":0},"generated":{"line":1,"column":152}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":31,"column":0},"generated":{"line":1,"column":158}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":31,"column":0},"generated":{"line":1,"column":160}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":31,"column":0},"generated":{"line":1,"column":162}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":31,"column":0},"generated":{"line":1,"column":170}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":36,"column":0},"generated":{"line":1,"column":199}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":36,"column":21},"generated":{"line":1,"column":205}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":39,"column":2},"generated":{"line":1,"column":207}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":39,"column":22},"generated":{"line":1,"column":219}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":39,"column":22},"generated":{"line":1,"column":222}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":39,"column":22},"generated":{"line":1,"column":227}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":39,"column":22},"generated":{"line":1,"column":239}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":46,"column":10},"generated":{"line":1,"column":241}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":46,"column":33},"generated":{"line":1,"column":264}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":68,"column":4},"generated":{"line":1,"column":267}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":68,"column":10},"generated":{"line":1,"column":273}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":68,"column":32},"generated":{"line":1,"column":281}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":68,"column":40},"generated":{"line":1,"column":289}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":69,"column":6},"generated":{"line":1,"column":293}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":69,"column":11},"generated":{"line":1,"column":298}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":69,"column":23},"generated":{"line":1,"column":310}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":69,"column":28},"generated":{"line":1,"column":314}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":69,"column":43},"generated":{"line":1,"column":317}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":69,"column":54},"generated":{"line":1,"column":319}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":69,"column":67},"generated":{"line":1,"column":332}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":72,"column":4},"generated":{"line":1,"column":337}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":72,"column":9},"generated":{"line":1,"column":341}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":72,"column":13},"generated":{"line":1,"column":345}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":72,"column":17},"generated":{"line":1,"column":347}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":72,"column":20},"generated":{"line":1,"column":349}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":72,"column":24},"generated":{"line":1,"column":351}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":72,"column":38},"generated":{"line":1,"column":353}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":72,"column":46},"generated":{"line":1,"column":360}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":72,"column":51},"generated":{"line":1,"column":363}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":73,"column":6},"generated":{"line":1,"column":365}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":73,"column":10},"generated":{"line":1,"column":368}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":73,"column":24},"generated":{"line":1,"column":370}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":74,"column":8},"generated":{"line":1,"column":373}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":74,"column":15},"generated":{"line":1,"column":380}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":74,"column":20},"generated":{"line":1,"column":385}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":74,"column":32},"generated":{"line":1,"column":397}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":77,"column":4},"generated":{"line":1,"column":400}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":77,"column":11},"generated":{"line":1,"column":407}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":80,"column":2},"generated":{"line":1,"column":412}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":80,"column":21},"generated":{"line":1,"column":431}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":81,"column":4},"generated":{"line":1,"column":434}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":81,"column":53},"generated":{"line":1,"column":441}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":81,"column":18},"generated":{"line":1,"column":454}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":81,"column":23},"generated":{"line":1,"column":459}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":81,"column":40},"generated":{"line":1,"column":476}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":84,"column":2},"generated":{"line":1,"column":479}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":84,"column":18},"generated":{"line":1,"column":495}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":85,"column":4},"generated":{"line":1,"column":498}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":85,"column":10},"generated":{"line":1,"column":504}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":85,"column":26},"generated":{"line":1,"column":512}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":85,"column":31},"generated":{"line":1,"column":517}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":85,"column":48},"generated":{"line":1,"column":534}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":86,"column":4},"generated":{"line":1,"column":537}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":86,"column":8},"generated":{"line":1,"column":540}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":87,"column":6},"generated":{"line":1,"column":542}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":87,"column":13},"generated":{"line":1,"column":549}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":87,"column":21},"generated":{"line":1,"column":551}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":87,"column":31},"generated":{"line":1,"column":561}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":90,"column":4},"generated":{"line":1,"column":564}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":90,"column":10},"generated":{"line":1,"column":570}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":90,"column":14},"generated":{"line":1,"column":574}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":90,"column":14},"generated":{"line":1,"column":576}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":91,"column":10},"generated":{"line":1,"column":588}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":91,"column":15},"generated":{"line":1,"column":593}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":91,"column":27},"generated":{"line":1,"column":605}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":91,"column":72},"generated":{"line":1,"column":650}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":92,"column":9},"generated":{"line":1,"column":652}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":92,"column":14},"generated":{"line":1,"column":656}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":93,"column":10},"generated":{"line":1,"column":660}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":94,"column":12},"generated":{"line":1,"column":664}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":94,"column":19},"generated":{"line":1,"column":671}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":94,"column":24},"generated":{"line":1,"column":676}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":94,"column":34},"generated":{"line":1,"column":686}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":95,"column":12},"generated":{"line":1,"column":689}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":95,"column":19},"generated":{"line":1,"column":695}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":97,"column":12},"generated":{"line":1,"column":698}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":97,"column":20},"generated":{"line":1,"column":705}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":97,"column":34},"generated":{"line":1,"column":707}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":100,"column":9},"generated":{"line":1,"column":721}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":100,"column":14},"generated":{"line":1,"column":726}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":36,"column":0},"generated":{"line":1,"column":736}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":36,"column":0},"generated":{"line":1,"column":744}},{"source":"../../../src/util/handlerPattern/AggregateHandler.ts","name":null,"original":{"line":36,"column":0},"generated":{"line":1,"column":752}}],"sources":{"../../../src/util/handlerPattern/AggregateHandler.ts":"/*\n * Copyright 2021 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\n/**\n * @hidden\n * @packageDocumentation\n */\n\n/**\n * An abstract class that will select the first handler that can handle certain parameters\n */\nimport IHandleable from \"./IHandleable\";\nimport InruptError from \"../../errors/InruptError\";\n\n/**\n * @hidden\n */\nexport default class AggregateHandler<P extends Array<unknown>, R>\n  implements IHandleable<P, R>\n{\n  constructor(private handleables: IHandleable<P, R>[]) {}\n\n  /**\n   * Helper function that will asynchronously determine the proper handler to use. If multiple\n   * handlers can handle, it will choose the first one in the list\n   * @param params Paramerters to feed to the handler\n   */\n  private async getProperHandler(params: P): Promise<IHandleable<P, R> | null> {\n    // TODO : This function doesn't currently operate as described. Tests need to be written\n\n    // return new Promise<IHandleable<P, R> | null>((resolve, reject) => {\n    //  const resolvedValues: Array<boolean | null> = Array(this.handleables.length).map(() => null)\n    //   let numberResolved = 0\n    //   this.handleables.forEach(async (handleable: IHandleable<P, R>, index: number) => {\n    //     resolvedValues[index] = await handleable.canHandle(...params)\n    //     numberResolved++\n    //     let curResolvedValueIndex = 0\n    //     while (\n    //       resolvedValues[curResolvedValueIndex] !== null ||\n    //       resolvedValues[curResolvedValueIndex] !== undefined\n    //     ) {\n    //       if (resolvedValues[curResolvedValueIndex]) {\n    //         resolve(this.handleables[curResolvedValueIndex])\n    //       }\n    //       curResolvedValueIndex++\n    //     }\n    //   })\n    // })\n\n    const canHandleList = await Promise.all(\n      this.handleables.map((handleable) => handleable.canHandle(...params))\n    );\n\n    for (let i = 0; i < canHandleList.length; i += 1) {\n      if (canHandleList[i]) {\n        return this.handleables[i];\n      }\n    }\n    return null;\n  }\n\n  async canHandle(...params: P): Promise<boolean> {\n    return (await this.getProperHandler(params)) !== null;\n  }\n\n  async handle(...params: P): Promise<R> {\n    const handler = await this.getProperHandler(params);\n    if (handler) {\n      return handler.handle(...params);\n    }\n\n    throw new InruptError(\n      `[${this.constructor.name}] cannot find a suitable handler for: ${params\n        .map((param) => {\n          try {\n            return JSON.stringify(param);\n          } catch (err) {\n            /* eslint-disable  @typescript-eslint/no-explicit-any */\n            return (param as any).toString();\n          }\n        })\n        .join(\", \")}`\n    );\n  }\n}\n"},"lineCount":null}},"error":null,"hash":"9d278918c785ef350194efa5f20a8dc7","cacheData":{"env":{}}}