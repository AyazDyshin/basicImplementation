{"id":"J3Os","dependencies":[{"name":"C:\\Users\\Shadthepro\\Desktop\\my-demo-app\\node_modules\\@inrupt\\solid-client-authn-core\\dist\\authenticatedFetch\\dpopUtils.js.map","includedInParent":true,"mtime":499162500000},{"name":"C:\\Users\\Shadthepro\\Desktop\\my-demo-app\\node_modules\\@inrupt\\solid-client-authn-core\\src\\authenticatedFetch\\dpopUtils.ts","includedInParent":true,"mtime":499162500000},{"name":"C:\\Users\\Shadthepro\\Desktop\\my-demo-app\\package.json","includedInParent":true,"mtime":1632614243327},{"name":"C:\\Users\\Shadthepro\\Desktop\\my-demo-app\\node_modules\\@inrupt\\solid-client-authn-core\\package.json","includedInParent":true,"mtime":1632612132798},{"name":"@inrupt/jose-legacy-modules","loc":{"line":4,"column":38},"parent":"C:\\Users\\Shadthepro\\Desktop\\my-demo-app\\node_modules\\@inrupt\\solid-client-authn-core\\dist\\authenticatedFetch\\dpopUtils.js","resolved":"C:\\Users\\Shadthepro\\Desktop\\my-demo-app\\node_modules\\@inrupt\\jose-legacy-modules\\dist\\index.browser.js"},{"name":"uuid","loc":{"line":5,"column":23},"parent":"C:\\Users\\Shadthepro\\Desktop\\my-demo-app\\node_modules\\@inrupt\\solid-client-authn-core\\dist\\authenticatedFetch\\dpopUtils.js","resolved":"C:\\Users\\Shadthepro\\Desktop\\my-demo-app\\node_modules\\uuid\\dist\\esm-browser\\index.js"},{"name":"../constant","loc":{"line":6,"column":27},"parent":"C:\\Users\\Shadthepro\\Desktop\\my-demo-app\\node_modules\\@inrupt\\solid-client-authn-core\\dist\\authenticatedFetch\\dpopUtils.js","resolved":"C:\\Users\\Shadthepro\\Desktop\\my-demo-app\\node_modules\\@inrupt\\solid-client-authn-core\\dist\\constant.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.generateDpopKeyPair=exports.createDpopHeader=void 0;const e=require(\"@inrupt/jose-legacy-modules\"),t=require(\"uuid\"),r=require(\"../constant\");function a(e){const t=new URL(e);return t.hash=\"\",t.username=\"\",t.password=\"\",t.toString()}async function i(i,p,n){return new e.SignJWT({htu:a(i),htm:p.toUpperCase(),jti:t.v4()}).setProtectedHeader({alg:r.PREFERRED_SIGNING_ALG[0],jwk:n.publicKey,typ:\"dpop+jwt\"}).setIssuedAt().sign(n.privateKey,{})}async function p(){const{privateKey:t,publicKey:a}=await e.generateKeyPair(r.PREFERRED_SIGNING_ALG[0]),i={privateKey:t,publicKey:await e.fromKeyLike(a)};return[i.publicKey.alg]=r.PREFERRED_SIGNING_ALG,i}exports.createDpopHeader=i,exports.generateDpopKeyPair=p;"},"sourceMaps":{"js":{"mappings":[{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":22,"column":0},"generated":{"line":1,"column":128}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":22,"column":0},"generated":{"line":1,"column":134}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":22,"column":0},"generated":{"line":1,"column":136}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":22,"column":0},"generated":{"line":1,"column":144}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":175}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":177}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":29,"column":0},"generated":{"line":1,"column":185}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":30,"column":0},"generated":{"line":1,"column":193}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":30,"column":0},"generated":{"line":1,"column":195}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":30,"column":0},"generated":{"line":1,"column":203}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":39,"column":0},"generated":{"line":1,"column":218}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":39,"column":9},"generated":{"line":1,"column":227}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":39,"column":39},"generated":{"line":1,"column":229}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":40,"column":2},"generated":{"line":1,"column":232}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":40,"column":8},"generated":{"line":1,"column":238}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":40,"column":26},"generated":{"line":1,"column":240}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":40,"column":30},"generated":{"line":1,"column":244}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":40,"column":34},"generated":{"line":1,"column":248}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":44,"column":2},"generated":{"line":1,"column":251}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":41,"column":2},"generated":{"line":1,"column":258}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":41,"column":18},"generated":{"line":1,"column":260}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":41,"column":25},"generated":{"line":1,"column":265}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":42,"column":2},"generated":{"line":1,"column":268}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":42,"column":18},"generated":{"line":1,"column":270}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":42,"column":29},"generated":{"line":1,"column":279}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":43,"column":2},"generated":{"line":1,"column":282}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":43,"column":18},"generated":{"line":1,"column":284}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":43,"column":29},"generated":{"line":1,"column":293}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":44,"column":9},"generated":{"line":1,"column":296}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":44,"column":25},"generated":{"line":1,"column":298}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":61,"column":7},"generated":{"line":1,"column":309}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":61,"column":22},"generated":{"line":1,"column":324}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":62,"column":2},"generated":{"line":1,"column":326}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":63,"column":2},"generated":{"line":1,"column":328}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":64,"column":2},"generated":{"line":1,"column":330}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":66,"column":2},"generated":{"line":1,"column":333}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":66,"column":9},"generated":{"line":1,"column":340}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":66,"column":13},"generated":{"line":1,"column":344}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":66,"column":13},"generated":{"line":1,"column":346}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":66,"column":21},"generated":{"line":1,"column":354}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":67,"column":4},"generated":{"line":1,"column":355}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":67,"column":9},"generated":{"line":1,"column":359}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":67,"column":39},"generated":{"line":1,"column":361}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":68,"column":4},"generated":{"line":1,"column":364}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":68,"column":9},"generated":{"line":1,"column":368}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":68,"column":16},"generated":{"line":1,"column":370}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":69,"column":4},"generated":{"line":1,"column":384}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":69,"column":9},"generated":{"line":1,"column":388}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":69,"column":9},"generated":{"line":1,"column":390}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":71,"column":5},"generated":{"line":1,"column":397}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":71,"column":24},"generated":{"line":1,"column":416}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":72,"column":6},"generated":{"line":1,"column":417}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":72,"column":11},"generated":{"line":1,"column":421}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":72,"column":11},"generated":{"line":1,"column":423}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":72,"column":33},"generated":{"line":1,"column":445}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":73,"column":6},"generated":{"line":1,"column":448}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":73,"column":11},"generated":{"line":1,"column":452}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":73,"column":19},"generated":{"line":1,"column":454}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":74,"column":6},"generated":{"line":1,"column":464}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":74,"column":11},"generated":{"line":1,"column":468}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":76,"column":5},"generated":{"line":1,"column":481}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":77,"column":5},"generated":{"line":1,"column":495}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":77,"column":10},"generated":{"line":1,"column":500}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":77,"column":18},"generated":{"line":1,"column":502}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":77,"column":30},"generated":{"line":1,"column":513}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":80,"column":7},"generated":{"line":1,"column":517}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":80,"column":22},"generated":{"line":1,"column":532}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":81,"column":2},"generated":{"line":1,"column":536}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":81,"column":8},"generated":{"line":1,"column":542}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":81,"column":10},"generated":{"line":1,"column":553}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":81,"column":20},"generated":{"line":1,"column":555}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":81,"column":22},"generated":{"line":1,"column":565}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":81,"column":42},"generated":{"line":1,"column":574}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":81,"column":42},"generated":{"line":1,"column":576}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":82,"column":4},"generated":{"line":1,"column":592}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":82,"column":4},"generated":{"line":1,"column":594}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":82,"column":26},"generated":{"line":1,"column":616}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":84,"column":8},"generated":{"line":1,"column":620}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":84,"column":22},"generated":{"line":1,"column":622}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":85,"column":4},"generated":{"line":1,"column":623}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":85,"column":4},"generated":{"line":1,"column":634}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":86,"column":4},"generated":{"line":1,"column":636}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":86,"column":21},"generated":{"line":1,"column":652}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":86,"column":21},"generated":{"line":1,"column":654}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":86,"column":33},"generated":{"line":1,"column":666}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":90,"column":2},"generated":{"line":1,"column":670}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":89,"column":3},"generated":{"line":1,"column":677}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":89,"column":15},"generated":{"line":1,"column":679}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":89,"column":25},"generated":{"line":1,"column":689}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":89,"column":32},"generated":{"line":1,"column":694}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":89,"column":32},"generated":{"line":1,"column":696}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":90,"column":9},"generated":{"line":1,"column":718}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":61,"column":0},"generated":{"line":1,"column":720}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":61,"column":0},"generated":{"line":1,"column":728}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":61,"column":0},"generated":{"line":1,"column":745}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":80,"column":0},"generated":{"line":1,"column":747}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":80,"column":0},"generated":{"line":1,"column":755}},{"source":"../../src/authenticatedFetch/dpopUtils.ts","name":null,"original":{"line":80,"column":0},"generated":{"line":1,"column":775}}],"sources":{"../../src/authenticatedFetch/dpopUtils.ts":"/*\n * Copyright 2021 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport {\n  JWK,\n  KeyLike,\n  SignJWT,\n  generateKeyPair,\n  fromKeyLike,\n} from \"@inrupt/jose-legacy-modules\";\nimport { v4 } from \"uuid\";\nimport { PREFERRED_SIGNING_ALG } from \"../constant\";\n\n/**\n * Normalizes a URL in order to generate the DPoP token based on a consistent scheme.\n *\n * @param audience The URL to normalize.\n * @returns The normalized URL as a string.\n * @hidden\n */\nfunction removeHashUsernameAndPassword(audience: string): string {\n  const cleanedAudience = new URL(audience);\n  cleanedAudience.hash = \"\";\n  cleanedAudience.username = \"\";\n  cleanedAudience.password = \"\";\n  return cleanedAudience.toString();\n}\n\nexport type KeyPair = {\n  privateKey: KeyLike;\n  publicKey: JWK;\n};\n\n/**\n * Creates a DPoP header according to https://tools.ietf.org/html/draft-fett-oauth-dpop-04,\n * based on the target URL and method, using the provided key.\n *\n * @param audience Target URL.\n * @param method HTTP method allowed.\n * @param key Key used to sign the token.\n * @returns A JWT that can be used as a DPoP Authorization header.\n */\nexport async function createDpopHeader(\n  audience: string,\n  method: string,\n  dpopKey: KeyPair\n): Promise<string> {\n  return new SignJWT({\n    htu: removeHashUsernameAndPassword(audience),\n    htm: method.toUpperCase(),\n    jti: v4(),\n  })\n    .setProtectedHeader({\n      alg: PREFERRED_SIGNING_ALG[0],\n      jwk: dpopKey.publicKey,\n      typ: \"dpop+jwt\",\n    })\n    .setIssuedAt()\n    .sign(dpopKey.privateKey, {});\n}\n\nexport async function generateDpopKeyPair(): Promise<KeyPair> {\n  const { privateKey, publicKey } = await generateKeyPair(\n    PREFERRED_SIGNING_ALG[0]\n  );\n  const dpopKeyPair = {\n    privateKey,\n    publicKey: await fromKeyLike(publicKey),\n  };\n  // The alg property isn't set by fromKeyLike, so set it manually.\n  [dpopKeyPair.publicKey.alg] = PREFERRED_SIGNING_ALG;\n  return dpopKeyPair;\n}\n"},"lineCount":null}},"error":null,"hash":"1a21ed942e89bd0969fb831350f671b5","cacheData":{"env":{}}}