{"id":"rgbZ","dependencies":[{"name":"C:\\Users\\Shadthepro\\Desktop\\my-demo-app\\node_modules\\@inrupt\\solid-client-authn-browser\\dist\\login\\oidc\\OidcLoginHandler.js.map","includedInParent":true,"mtime":499162500000},{"name":"C:\\Users\\Shadthepro\\Desktop\\my-demo-app\\node_modules\\@inrupt\\solid-client-authn-browser\\src\\login\\oidc\\OidcLoginHandler.ts","includedInParent":true,"mtime":499162500000},{"name":"C:\\Users\\Shadthepro\\Desktop\\my-demo-app\\package.json","includedInParent":true,"mtime":1632614243327},{"name":"C:\\Users\\Shadthepro\\Desktop\\my-demo-app\\node_modules\\@inrupt\\solid-client-authn-browser\\package.json","includedInParent":true,"mtime":1632612132843},{"name":"@inrupt/solid-client-authn-core","loc":{"line":3,"column":42},"parent":"C:\\Users\\Shadthepro\\Desktop\\my-demo-app\\node_modules\\@inrupt\\solid-client-authn-browser\\dist\\login\\oidc\\OidcLoginHandler.js","resolved":"C:\\Users\\Shadthepro\\Desktop\\my-demo-app\\node_modules\\@inrupt\\solid-client-authn-core\\dist\\index.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0});const r=require(\"@inrupt/solid-client-authn-core\");function i(r){return\"string\"==typeof r.oidcIssuer}function e(r){return\"string\"==typeof r.redirectUrl}class t{constructor(r,i,e,t){this.storageUtility=r,this.oidcHandler=i,this.issuerConfigFetcher=e,this.clientRegistrar=t}async canHandle(r){return i(r)&&e(r)}async handle(t){if(!i(t))throw new r.ConfigurationError(`OidcLoginHandler requires an OIDC issuer: missing property 'oidcIssuer' in ${JSON.stringify(t)}`);if(!e(t))throw new r.ConfigurationError(`OidcLoginHandler requires a redirect URL: missing property 'redirectUrl' in ${JSON.stringify(t)}`);const s=await this.issuerConfigFetcher.fetchConfig(t.oidcIssuer),n=await r.handleRegistration(t,s,this.storageUtility,this.clientRegistrar),o={issuer:s.issuer,dpop:\"dpop\"===t.tokenType.toLowerCase(),...t,issuerConfiguration:s,client:n};return this.oidcHandler.handle(o)}}exports.default=t;"},"sourceMaps":{"js":{"mappings":[{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":31,"column":0},"generated":{"line":1,"column":68}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":31,"column":0},"generated":{"line":1,"column":74}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":31,"column":0},"generated":{"line":1,"column":76}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":31,"column":0},"generated":{"line":1,"column":84}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":45,"column":0},"generated":{"line":1,"column":119}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":45,"column":9},"generated":{"line":1,"column":128}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":46,"column":2},"generated":{"line":1,"column":130}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":48,"column":2},"generated":{"line":1,"column":133}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":48,"column":39},"generated":{"line":1,"column":139}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":48,"column":16},"generated":{"line":1,"column":156}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":48,"column":24},"generated":{"line":1,"column":158}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":51,"column":0},"generated":{"line":1,"column":169}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":51,"column":9},"generated":{"line":1,"column":178}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":52,"column":2},"generated":{"line":1,"column":180}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":54,"column":2},"generated":{"line":1,"column":183}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":54,"column":40},"generated":{"line":1,"column":189}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":54,"column":16},"generated":{"line":1,"column":206}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":54,"column":24},"generated":{"line":1,"column":208}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":60,"column":0},"generated":{"line":1,"column":220}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":60,"column":21},"generated":{"line":1,"column":226}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":61,"column":2},"generated":{"line":1,"column":228}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":62,"column":12},"generated":{"line":1,"column":240}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":63,"column":12},"generated":{"line":1,"column":242}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":64,"column":12},"generated":{"line":1,"column":244}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":65,"column":12},"generated":{"line":1,"column":246}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":62,"column":12},"generated":{"line":1,"column":249}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":62,"column":12},"generated":{"line":1,"column":254}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":62,"column":12},"generated":{"line":1,"column":269}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":63,"column":12},"generated":{"line":1,"column":271}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":63,"column":12},"generated":{"line":1,"column":276}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":63,"column":12},"generated":{"line":1,"column":288}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":64,"column":12},"generated":{"line":1,"column":290}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":64,"column":12},"generated":{"line":1,"column":295}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":64,"column":12},"generated":{"line":1,"column":315}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":65,"column":12},"generated":{"line":1,"column":317}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":65,"column":12},"generated":{"line":1,"column":322}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":65,"column":12},"generated":{"line":1,"column":338}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":68,"column":2},"generated":{"line":1,"column":340}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":68,"column":18},"generated":{"line":1,"column":356}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":69,"column":4},"generated":{"line":1,"column":359}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":69,"column":11},"generated":{"line":1,"column":366}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":69,"column":21},"generated":{"line":1,"column":368}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":69,"column":33},"generated":{"line":1,"column":372}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":69,"column":48},"generated":{"line":1,"column":374}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":72,"column":2},"generated":{"line":1,"column":377}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":72,"column":15},"generated":{"line":1,"column":390}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":73,"column":4},"generated":{"line":1,"column":393}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":73,"column":9},"generated":{"line":1,"column":397}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":73,"column":19},"generated":{"line":1,"column":399}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":74,"column":6},"generated":{"line":1,"column":402}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":74,"column":12},"generated":{"line":1,"column":408}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":74,"column":16},"generated":{"line":1,"column":412}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":74,"column":16},"generated":{"line":1,"column":414}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":75,"column":86},"generated":{"line":1,"column":511}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":75,"column":91},"generated":{"line":1,"column":516}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":76,"column":10},"generated":{"line":1,"column":526}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":80,"column":4},"generated":{"line":1,"column":532}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":80,"column":9},"generated":{"line":1,"column":536}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":80,"column":24},"generated":{"line":1,"column":538}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":81,"column":6},"generated":{"line":1,"column":541}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":81,"column":12},"generated":{"line":1,"column":547}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":81,"column":16},"generated":{"line":1,"column":551}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":81,"column":16},"generated":{"line":1,"column":553}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":82,"column":87},"generated":{"line":1,"column":651}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":82,"column":92},"generated":{"line":1,"column":656}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":83,"column":10},"generated":{"line":1,"column":666}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":89,"column":4},"generated":{"line":1,"column":672}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":89,"column":10},"generated":{"line":1,"column":678}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":90,"column":12},"generated":{"line":1,"column":686}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":90,"column":17},"generated":{"line":1,"column":691}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":90,"column":37},"generated":{"line":1,"column":711}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":90,"column":49},"generated":{"line":1,"column":723}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":90,"column":57},"generated":{"line":1,"column":725}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":92,"column":10},"generated":{"line":1,"column":737}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":92,"column":37},"generated":{"line":1,"column":745}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":92,"column":37},"generated":{"line":1,"column":747}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":93,"column":6},"generated":{"line":1,"column":766}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":94,"column":6},"generated":{"line":1,"column":768}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":95,"column":6},"generated":{"line":1,"column":770}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":95,"column":11},"generated":{"line":1,"column":775}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":96,"column":6},"generated":{"line":1,"column":790}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":96,"column":11},"generated":{"line":1,"column":795}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":100,"column":10},"generated":{"line":1,"column":812}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":100,"column":38},"generated":{"line":1,"column":814}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":106,"column":6},"generated":{"line":1,"column":815}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":106,"column":14},"generated":{"line":1,"column":822}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":106,"column":27},"generated":{"line":1,"column":824}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":108,"column":6},"generated":{"line":1,"column":831}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":108,"column":48},"generated":{"line":1,"column":836}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":108,"column":12},"generated":{"line":1,"column":845}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":108,"column":20},"generated":{"line":1,"column":847}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":108,"column":30},"generated":{"line":1,"column":857}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":109,"column":9},"generated":{"line":1,"column":874}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":110,"column":6},"generated":{"line":1,"column":876}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":110,"column":27},"generated":{"line":1,"column":896}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":111,"column":6},"generated":{"line":1,"column":898}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":111,"column":14},"generated":{"line":1,"column":905}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":115,"column":4},"generated":{"line":1,"column":908}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":115,"column":11},"generated":{"line":1,"column":915}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":115,"column":16},"generated":{"line":1,"column":920}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":115,"column":28},"generated":{"line":1,"column":932}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":115,"column":35},"generated":{"line":1,"column":939}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":60,"column":0},"generated":{"line":1,"column":943}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":60,"column":0},"generated":{"line":1,"column":951}},{"source":"../../../src/login/oidc/OidcLoginHandler.ts","name":null,"original":{"line":60,"column":0},"generated":{"line":1,"column":959}}],"sources":{"../../../src/login/oidc/OidcLoginHandler.ts":"/*\n * Copyright 2021 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\n/**\n * @hidden\n * @packageDocumentation\n */\n\n/**\n * Handles Common Oidc login functions (Like fetching the configuration)\n */\n\nimport {\n  IClientRegistrar,\n  IIssuerConfig,\n  IIssuerConfigFetcher,\n  ILoginOptions,\n  ILoginHandler,\n  IOidcHandler,\n  IOidcOptions,\n  IStorageUtility,\n  ConfigurationError,\n  LoginResult,\n  handleRegistration,\n} from \"@inrupt/solid-client-authn-core\";\n\nfunction hasIssuer(\n  options: ILoginOptions\n): options is ILoginOptions & { oidcIssuer: string } {\n  return typeof options.oidcIssuer === \"string\";\n}\n\nfunction hasRedirectUrl(\n  options: ILoginOptions\n): options is ILoginOptions & { redirectUrl: string } {\n  return typeof options.redirectUrl === \"string\";\n}\n\n/**\n * @hidden\n */\nexport default class OidcLoginHandler implements ILoginHandler {\n  constructor(\n    private storageUtility: IStorageUtility,\n    private oidcHandler: IOidcHandler,\n    private issuerConfigFetcher: IIssuerConfigFetcher,\n    private clientRegistrar: IClientRegistrar\n  ) {}\n\n  async canHandle(options: ILoginOptions): Promise<boolean> {\n    return hasIssuer(options) && hasRedirectUrl(options);\n  }\n\n  async handle(options: ILoginOptions): Promise<LoginResult> {\n    if (!hasIssuer(options)) {\n      throw new ConfigurationError(\n        `OidcLoginHandler requires an OIDC issuer: missing property 'oidcIssuer' in ${JSON.stringify(\n          options\n        )}`\n      );\n    }\n    if (!hasRedirectUrl(options)) {\n      throw new ConfigurationError(\n        `OidcLoginHandler requires a redirect URL: missing property 'redirectUrl' in ${JSON.stringify(\n          options\n        )}`\n      );\n    }\n\n    // Fetch issuer config.\n    const issuerConfig: IIssuerConfig =\n      await this.issuerConfigFetcher.fetchConfig(options.oidcIssuer);\n\n    const clientRegistration = await handleRegistration(\n      options,\n      issuerConfig,\n      this.storageUtility,\n      this.clientRegistrar\n    );\n\n    // Construct OIDC Options\n    const OidcOptions: IOidcOptions = {\n      // Note that here, the issuer is not the one from the received options, but\n      // from the issuer's config. This enforces the canonical URL is used and stored,\n      // which is also the one present in the ID token, so storing a technically\n      // valid, but different issuer URL (e.g. using a trailing slash or not) now\n      // could prevent from validating the ID token later.\n      issuer: issuerConfig.issuer,\n      // TODO: differentiate if DPoP should be true\n      dpop: options.tokenType.toLowerCase() === \"dpop\",\n      ...options,\n      issuerConfiguration: issuerConfig,\n      client: clientRegistration,\n    };\n\n    // Call proper OIDC Handler\n    return this.oidcHandler.handle(OidcOptions);\n  }\n}\n"},"lineCount":null}},"error":null,"hash":"f68cdd67589b8a758b08deaa1499acb4","cacheData":{"env":{}}}