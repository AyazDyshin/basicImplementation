{"id":"XG8H","dependencies":[{"name":"C:\\Users\\Shadthepro\\Desktop\\my-demo-app\\node_modules\\@inrupt\\solid-client-authn-browser\\dist\\ClientAuthentication.js.map","includedInParent":true,"mtime":499162500000},{"name":"C:\\Users\\Shadthepro\\Desktop\\my-demo-app\\node_modules\\@inrupt\\solid-client-authn-browser\\src\\ClientAuthentication.ts","includedInParent":true,"mtime":499162500000},{"name":"C:\\Users\\Shadthepro\\Desktop\\my-demo-app\\package.json","includedInParent":true,"mtime":1632614243327},{"name":"C:\\Users\\Shadthepro\\Desktop\\my-demo-app\\node_modules\\@inrupt\\solid-client-authn-browser\\package.json","includedInParent":true,"mtime":1632612132843},{"name":"@inrupt/solid-client-authn-core","loc":{"line":3,"column":42},"parent":"C:\\Users\\Shadthepro\\Desktop\\my-demo-app\\node_modules\\@inrupt\\solid-client-authn-browser\\dist\\ClientAuthentication.js","resolved":"C:\\Users\\Shadthepro\\Desktop\\my-demo-app\\node_modules\\@inrupt\\solid-client-authn-core\\dist\\index.js"},{"name":"@inrupt/oidc-client-ext","loc":{"line":4,"column":34},"parent":"C:\\Users\\Shadthepro\\Desktop\\my-demo-app\\node_modules\\@inrupt\\solid-client-authn-browser\\dist\\ClientAuthentication.js","resolved":"C:\\Users\\Shadthepro\\Desktop\\my-demo-app\\node_modules\\@inrupt\\oidc-client-ext\\dist\\index.es.js"},{"name":"@inrupt/jose-legacy-modules","loc":{"line":5,"column":38},"parent":"C:\\Users\\Shadthepro\\Desktop\\my-demo-app\\node_modules\\@inrupt\\solid-client-authn-browser\\dist\\ClientAuthentication.js","resolved":"C:\\Users\\Shadthepro\\Desktop\\my-demo-app\\node_modules\\@inrupt\\jose-legacy-modules\\dist\\index.browser.js"},{"name":"./constant","loc":{"line":6,"column":27},"parent":"C:\\Users\\Shadthepro\\Desktop\\my-demo-app\\node_modules\\@inrupt\\solid-client-authn-browser\\dist\\ClientAuthentication.js","resolved":"C:\\Users\\Shadthepro\\Desktop\\my-demo-app\\node_modules\\@inrupt\\solid-client-authn-browser\\dist\\constant.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0});const e=require(\"@inrupt/solid-client-authn-core\"),t=require(\"@inrupt/oidc-client-ext\"),s=require(\"@inrupt/jose-legacy-modules\"),i=require(\"./constant\"),n=(e,t)=>window.fetch(e,t);class r{constructor(r,a,o,c,l){this.loginHandler=r,this.redirectHandler=a,this.logoutHandler=o,this.sessionInfoManager=c,this.issuerConfigFetcher=l,this.login=(async(e,s)=>{var i,n;await this.sessionInfoManager.clear(e.sessionId);const r=t.removeOidcQueryParam(null!==(i=e.redirectUrl)&&void 0!==i?i:window.location.href);await this.loginHandler.handle({...e,redirectUrl:r,clientName:null!==(n=e.clientName)&&void 0!==n?n:e.clientId,eventEmitter:s})}),this.fetch=n,this.logout=(async e=>{await this.logoutHandler.handle(e),this.fetch=n}),this.getSessionInfo=(async e=>this.sessionInfoManager.get(e)),this.getAllSessionInfo=(async()=>this.sessionInfoManager.getAll()),this.validateCurrentSession=(async()=>{const t=window.localStorage.getItem(i.KEY_CURRENT_SESSION);if(null===t)return null;const n=await this.sessionInfoManager.get(t);if(void 0===n||void 0===n.idToken||void 0===n.clientAppId||void 0===n.issuer)return null;const r=await this.issuerConfigFetcher.fetchConfig(n.issuer);try{const t=await e.fetchJwks(r.jwksUri,r.issuer);return await s.jwtVerify(n.idToken,await s.parseJwk(t),{audience:n.clientAppId,issuer:r.issuer}),n}catch(a){}return null}),this.handleIncomingRedirect=(async(e,t)=>{const s=await this.redirectHandler.handle(e,t);this.fetch=s.fetch.bind(window);const i=new URL(e);return i.searchParams.delete(\"state\"),i.searchParams.delete(\"code\"),i.searchParams.delete(\"id_token\"),i.searchParams.delete(\"access_token\"),i.searchParams.delete(\"error\"),i.searchParams.delete(\"error_description\"),window.history.replaceState(null,\"\",i.toString()),{isLoggedIn:s.isLoggedIn,webId:s.webId,sessionId:s.sessionId,expirationDate:s.expirationDate}})}}exports.default=r;"},"sourceMaps":{"js":{"mappings":[{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":27,"column":0},"generated":{"line":1,"column":68}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":27,"column":0},"generated":{"line":1,"column":74}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":27,"column":0},"generated":{"line":1,"column":76}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":27,"column":0},"generated":{"line":1,"column":84}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":38,"column":0},"generated":{"line":1,"column":119}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":38,"column":0},"generated":{"line":1,"column":121}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":38,"column":0},"generated":{"line":1,"column":129}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":39,"column":0},"generated":{"line":1,"column":156}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":39,"column":0},"generated":{"line":1,"column":158}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":39,"column":0},"generated":{"line":1,"column":166}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":41,"column":0},"generated":{"line":1,"column":197}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":41,"column":0},"generated":{"line":1,"column":199}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":41,"column":0},"generated":{"line":1,"column":207}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":46,"column":6},"generated":{"line":1,"column":221}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":46,"column":41},"generated":{"line":1,"column":223}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":46,"column":42},"generated":{"line":1,"column":224}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":46,"column":51},"generated":{"line":1,"column":226}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":47,"column":2},"generated":{"line":1,"column":230}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":47,"column":9},"generated":{"line":1,"column":237}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":47,"column":15},"generated":{"line":1,"column":243}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":47,"column":24},"generated":{"line":1,"column":245}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":52,"column":0},"generated":{"line":1,"column":248}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":52,"column":21},"generated":{"line":1,"column":254}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":53,"column":2},"generated":{"line":1,"column":256}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":54,"column":12},"generated":{"line":1,"column":268}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":55,"column":12},"generated":{"line":1,"column":270}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":56,"column":12},"generated":{"line":1,"column":272}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":57,"column":12},"generated":{"line":1,"column":274}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":58,"column":12},"generated":{"line":1,"column":276}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":54,"column":12},"generated":{"line":1,"column":279}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":54,"column":12},"generated":{"line":1,"column":284}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":54,"column":12},"generated":{"line":1,"column":297}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":55,"column":12},"generated":{"line":1,"column":299}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":55,"column":12},"generated":{"line":1,"column":304}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":55,"column":12},"generated":{"line":1,"column":320}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":56,"column":12},"generated":{"line":1,"column":322}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":56,"column":12},"generated":{"line":1,"column":327}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":56,"column":12},"generated":{"line":1,"column":341}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":57,"column":12},"generated":{"line":1,"column":343}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":57,"column":12},"generated":{"line":1,"column":348}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":57,"column":12},"generated":{"line":1,"column":367}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":58,"column":12},"generated":{"line":1,"column":369}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":58,"column":12},"generated":{"line":1,"column":374}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":58,"column":12},"generated":{"line":1,"column":394}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":63,"column":2},"generated":{"line":1,"column":396}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":63,"column":2},"generated":{"line":1,"column":401}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":63,"column":10},"generated":{"line":1,"column":407}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":64,"column":4},"generated":{"line":1,"column":414}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":65,"column":4},"generated":{"line":1,"column":416}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":73,"column":10},"generated":{"line":1,"column":435}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":73,"column":15},"generated":{"line":1,"column":440}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":73,"column":34},"generated":{"line":1,"column":459}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":73,"column":40},"generated":{"line":1,"column":465}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":73,"column":48},"generated":{"line":1,"column":467}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":78,"column":4},"generated":{"line":1,"column":478}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":78,"column":10},"generated":{"line":1,"column":484}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":78,"column":24},"generated":{"line":1,"column":486}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":78,"column":24},"generated":{"line":1,"column":488}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":79,"column":25},"generated":{"line":1,"column":509}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":79,"column":6},"generated":{"line":1,"column":517}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":79,"column":6},"generated":{"line":1,"column":519}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":79,"column":14},"generated":{"line":1,"column":521}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":79,"column":25},"generated":{"line":1,"column":540}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":79,"column":25},"generated":{"line":1,"column":544}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":79,"column":25},"generated":{"line":1,"column":546}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":79,"column":29},"generated":{"line":1,"column":548}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":79,"column":36},"generated":{"line":1,"column":555}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":79,"column":45},"generated":{"line":1,"column":564}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":82,"column":10},"generated":{"line":1,"column":576}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":82,"column":15},"generated":{"line":1,"column":581}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":82,"column":28},"generated":{"line":1,"column":594}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":82,"column":35},"generated":{"line":1,"column":601}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":83,"column":9},"generated":{"line":1,"column":605}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":84,"column":6},"generated":{"line":1,"column":607}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":84,"column":6},"generated":{"line":1,"column":619}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":86,"column":6},"generated":{"line":1,"column":621}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":86,"column":36},"generated":{"line":1,"column":632}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":86,"column":18},"generated":{"line":1,"column":640}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":86,"column":18},"generated":{"line":1,"column":642}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":86,"column":26},"generated":{"line":1,"column":644}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":86,"column":36},"generated":{"line":1,"column":662}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":86,"column":36},"generated":{"line":1,"column":666}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":86,"column":36},"generated":{"line":1,"column":668}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":86,"column":40},"generated":{"line":1,"column":670}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":86,"column":48},"generated":{"line":1,"column":672}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":87,"column":6},"generated":{"line":1,"column":681}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":87,"column":6},"generated":{"line":1,"column":694}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":92,"column":2},"generated":{"line":1,"column":700}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":92,"column":2},"generated":{"line":1,"column":705}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":92,"column":10},"generated":{"line":1,"column":711}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":94,"column":2},"generated":{"line":1,"column":713}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":94,"column":2},"generated":{"line":1,"column":718}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":94,"column":11},"generated":{"line":1,"column":725}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":94,"column":18},"generated":{"line":1,"column":732}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":95,"column":10},"generated":{"line":1,"column":742}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":95,"column":15},"generated":{"line":1,"column":747}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":95,"column":29},"generated":{"line":1,"column":761}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":95,"column":36},"generated":{"line":1,"column":768}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":99,"column":4},"generated":{"line":1,"column":771}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":99,"column":9},"generated":{"line":1,"column":776}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":99,"column":17},"generated":{"line":1,"column":782}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":102,"column":2},"generated":{"line":1,"column":786}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":102,"column":2},"generated":{"line":1,"column":791}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":102,"column":19},"generated":{"line":1,"column":806}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":103,"column":4},"generated":{"line":1,"column":813}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":106,"column":11},"generated":{"line":1,"column":816}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":106,"column":16},"generated":{"line":1,"column":821}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":106,"column":35},"generated":{"line":1,"column":840}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":106,"column":39},"generated":{"line":1,"column":844}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":109,"column":2},"generated":{"line":1,"column":848}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":109,"column":2},"generated":{"line":1,"column":853}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":109,"column":22},"generated":{"line":1,"column":871}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":110,"column":11},"generated":{"line":1,"column":881}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":110,"column":16},"generated":{"line":1,"column":886}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":110,"column":35},"generated":{"line":1,"column":905}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":113,"column":2},"generated":{"line":1,"column":915}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":113,"column":2},"generated":{"line":1,"column":920}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":113,"column":27},"generated":{"line":1,"column":943}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":116,"column":4},"generated":{"line":1,"column":954}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":116,"column":10},"generated":{"line":1,"column":960}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":116,"column":29},"generated":{"line":1,"column":962}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":116,"column":36},"generated":{"line":1,"column":969}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":116,"column":49},"generated":{"line":1,"column":982}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":116,"column":57},"generated":{"line":1,"column":990}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":116,"column":57},"generated":{"line":1,"column":992}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":117,"column":4},"generated":{"line":1,"column":1013}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":117,"column":29},"generated":{"line":1,"column":1016}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":117,"column":8},"generated":{"line":1,"column":1023}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":118,"column":6},"generated":{"line":1,"column":1025}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":118,"column":13},"generated":{"line":1,"column":1032}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":120,"column":4},"generated":{"line":1,"column":1037}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":120,"column":10},"generated":{"line":1,"column":1043}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":120,"column":30},"generated":{"line":1,"column":1051}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":120,"column":35},"generated":{"line":1,"column":1056}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":120,"column":54},"generated":{"line":1,"column":1075}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":120,"column":58},"generated":{"line":1,"column":1079}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":124,"column":4},"generated":{"line":1,"column":1082}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":125,"column":22},"generated":{"line":1,"column":1090}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":125,"column":6},"generated":{"line":1,"column":1094}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":126,"column":30},"generated":{"line":1,"column":1102}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":126,"column":6},"generated":{"line":1,"column":1106}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":126,"column":18},"generated":{"line":1,"column":1108}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":127,"column":34},"generated":{"line":1,"column":1122}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":127,"column":6},"generated":{"line":1,"column":1126}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":127,"column":18},"generated":{"line":1,"column":1128}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":128,"column":29},"generated":{"line":1,"column":1146}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":128,"column":6},"generated":{"line":1,"column":1150}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":128,"column":18},"generated":{"line":1,"column":1152}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":130,"column":6},"generated":{"line":1,"column":1159}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":130,"column":13},"generated":{"line":1,"column":1166}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":132,"column":4},"generated":{"line":1,"column":1171}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":132,"column":10},"generated":{"line":1,"column":1177}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":132,"column":31},"generated":{"line":1,"column":1185}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":132,"column":36},"generated":{"line":1,"column":1190}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":132,"column":56},"generated":{"line":1,"column":1210}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":133,"column":6},"generated":{"line":1,"column":1222}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":133,"column":18},"generated":{"line":1,"column":1224}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":136,"column":4},"generated":{"line":1,"column":1232}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":137,"column":6},"generated":{"line":1,"column":1236}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":137,"column":12},"generated":{"line":1,"column":1242}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":137,"column":24},"generated":{"line":1,"column":1250}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":137,"column":24},"generated":{"line":1,"column":1252}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":137,"column":34},"generated":{"line":1,"column":1262}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":137,"column":47},"generated":{"line":1,"column":1264}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":137,"column":56},"generated":{"line":1,"column":1272}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":137,"column":69},"generated":{"line":1,"column":1274}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":142,"column":6},"generated":{"line":1,"column":1282}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":138,"column":12},"generated":{"line":1,"column":1295}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":138,"column":12},"generated":{"line":1,"column":1297}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":138,"column":22},"generated":{"line":1,"column":1307}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":138,"column":34},"generated":{"line":1,"column":1309}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":138,"column":49},"generated":{"line":1,"column":1323}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":138,"column":49},"generated":{"line":1,"column":1325}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":138,"column":58},"generated":{"line":1,"column":1334}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":138,"column":64},"generated":{"line":1,"column":1337}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":139,"column":8},"generated":{"line":1,"column":1338}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":139,"column":18},"generated":{"line":1,"column":1347}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":139,"column":30},"generated":{"line":1,"column":1349}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":140,"column":8},"generated":{"line":1,"column":1361}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":140,"column":16},"generated":{"line":1,"column":1368}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":140,"column":29},"generated":{"line":1,"column":1370}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":142,"column":13},"generated":{"line":1,"column":1379}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":143,"column":6},"generated":{"line":1,"column":1381}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":143,"column":13},"generated":{"line":1,"column":1387}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":147,"column":4},"generated":{"line":1,"column":1391}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":147,"column":11},"generated":{"line":1,"column":1398}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":150,"column":2},"generated":{"line":1,"column":1405}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":150,"column":2},"generated":{"line":1,"column":1410}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":150,"column":27},"generated":{"line":1,"column":1433}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":151,"column":4},"generated":{"line":1,"column":1440}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":152,"column":4},"generated":{"line":1,"column":1442}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":154,"column":4},"generated":{"line":1,"column":1447}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":154,"column":10},"generated":{"line":1,"column":1453}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":154,"column":31},"generated":{"line":1,"column":1461}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":154,"column":36},"generated":{"line":1,"column":1466}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":154,"column":52},"generated":{"line":1,"column":1482}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":154,"column":59},"generated":{"line":1,"column":1489}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":154,"column":64},"generated":{"line":1,"column":1491}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":159,"column":4},"generated":{"line":1,"column":1494}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":159,"column":9},"generated":{"line":1,"column":1499}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":159,"column":17},"generated":{"line":1,"column":1505}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":159,"column":30},"generated":{"line":1,"column":1507}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":159,"column":36},"generated":{"line":1,"column":1513}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":159,"column":41},"generated":{"line":1,"column":1518}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":161,"column":4},"generated":{"line":1,"column":1526}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":161,"column":10},"generated":{"line":1,"column":1532}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":161,"column":25},"generated":{"line":1,"column":1534}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":161,"column":29},"generated":{"line":1,"column":1538}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":161,"column":33},"generated":{"line":1,"column":1542}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":179,"column":4},"generated":{"line":1,"column":1545}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":162,"column":4},"generated":{"line":1,"column":1552}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":162,"column":17},"generated":{"line":1,"column":1554}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":162,"column":30},"generated":{"line":1,"column":1567}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":162,"column":37},"generated":{"line":1,"column":1574}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":164,"column":4},"generated":{"line":1,"column":1583}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":164,"column":17},"generated":{"line":1,"column":1585}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":164,"column":30},"generated":{"line":1,"column":1598}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":164,"column":37},"generated":{"line":1,"column":1605}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":166,"column":4},"generated":{"line":1,"column":1613}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":166,"column":17},"generated":{"line":1,"column":1615}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":166,"column":30},"generated":{"line":1,"column":1628}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":166,"column":37},"generated":{"line":1,"column":1635}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":167,"column":4},"generated":{"line":1,"column":1647}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":167,"column":17},"generated":{"line":1,"column":1649}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":167,"column":30},"generated":{"line":1,"column":1662}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":167,"column":37},"generated":{"line":1,"column":1669}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":169,"column":4},"generated":{"line":1,"column":1685}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":169,"column":17},"generated":{"line":1,"column":1687}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":169,"column":30},"generated":{"line":1,"column":1700}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":169,"column":37},"generated":{"line":1,"column":1707}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":170,"column":4},"generated":{"line":1,"column":1716}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":170,"column":17},"generated":{"line":1,"column":1718}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":170,"column":30},"generated":{"line":1,"column":1731}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":170,"column":37},"generated":{"line":1,"column":1738}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":177,"column":4},"generated":{"line":1,"column":1759}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":177,"column":11},"generated":{"line":1,"column":1766}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":177,"column":19},"generated":{"line":1,"column":1774}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":177,"column":32},"generated":{"line":1,"column":1787}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":177,"column":38},"generated":{"line":1,"column":1792}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":177,"column":42},"generated":{"line":1,"column":1795}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":177,"column":55},"generated":{"line":1,"column":1797}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":179,"column":11},"generated":{"line":1,"column":1809}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":180,"column":6},"generated":{"line":1,"column":1810}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":180,"column":18},"generated":{"line":1,"column":1821}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":180,"column":31},"generated":{"line":1,"column":1823}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":181,"column":6},"generated":{"line":1,"column":1834}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":181,"column":13},"generated":{"line":1,"column":1840}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":181,"column":26},"generated":{"line":1,"column":1842}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":182,"column":6},"generated":{"line":1,"column":1848}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":182,"column":17},"generated":{"line":1,"column":1858}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":182,"column":30},"generated":{"line":1,"column":1860}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":183,"column":6},"generated":{"line":1,"column":1870}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":183,"column":22},"generated":{"line":1,"column":1885}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":183,"column":35},"generated":{"line":1,"column":1887}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":52,"column":0},"generated":{"line":1,"column":1906}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":52,"column":0},"generated":{"line":1,"column":1914}},{"source":"../src/ClientAuthentication.ts","name":null,"original":{"line":52,"column":0},"generated":{"line":1,"column":1922}}],"sources":{"../src/ClientAuthentication.ts":"/*\n * Copyright 2021 Inrupt Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to use,\n * copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the\n * Software, and to permit persons to whom the Software is furnished to do so,\n * subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A\n * PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\n/**\n * @hidden\n * @packageDocumentation\n */\n\nimport {\n  ILoginHandler,\n  ILogoutHandler,\n  IRedirectHandler,\n  ISessionInfo,\n  ISessionInfoManager,\n  IIssuerConfigFetcher,\n  ISessionInternalInfo,\n  ILoginOptions,\n  fetchJwks,\n} from \"@inrupt/solid-client-authn-core\";\nimport { removeOidcQueryParam } from \"@inrupt/oidc-client-ext\";\nimport { jwtVerify, parseJwk } from \"@inrupt/jose-legacy-modules\";\nimport { EventEmitter } from \"events\";\nimport { KEY_CURRENT_SESSION } from \"./constant\";\n\n// By only referring to `window` at runtime, apps that do server-side rendering\n// won't run into errors when rendering code that instantiates a\n// ClientAuthentication:\nconst globalFetch: typeof window.fetch = (request, init) =>\n  window.fetch(request, init);\n\n/**\n * @hidden\n */\nexport default class ClientAuthentication {\n  constructor(\n    private loginHandler: ILoginHandler,\n    private redirectHandler: IRedirectHandler,\n    private logoutHandler: ILogoutHandler,\n    private sessionInfoManager: ISessionInfoManager,\n    private issuerConfigFetcher: IIssuerConfigFetcher\n  ) {}\n\n  // Define these functions as properties so that they don't get accidentally re-bound.\n  // Isn't Javascript fun?\n  login = async (\n    options: ILoginOptions,\n    eventEmitter: EventEmitter\n  ): Promise<void> => {\n    // In order to get a clean start, make sure that the session is logged out\n    // on login.\n    // But we may want to preserve our client application info, particularly if\n    // we used Dynamic Client Registration to register (since we don't\n    // necessarily want the user to have to register this app each time they\n    // login).\n    await this.sessionInfoManager.clear(options.sessionId);\n\n    // In the case of the user hitting the 'back' button in their browser, they\n    // could return to a previous redirect URL that contains OIDC params that\n    // are now longer valid - so just to be safe, strip relevant params now.\n    const redirectUrl = removeOidcQueryParam(\n      options.redirectUrl ?? window.location.href\n    );\n\n    await this.loginHandler.handle({\n      ...options,\n      redirectUrl,\n      // If no clientName is provided, the clientId may be used instead.\n      clientName: options.clientName ?? options.clientId,\n      eventEmitter,\n    });\n  };\n\n  // By default, our fetch() resolves to the environment fetch() function.\n  fetch = globalFetch;\n\n  logout = async (sessionId: string): Promise<void> => {\n    await this.logoutHandler.handle(sessionId);\n\n    // Restore our fetch() function back to the environment fetch(), effectively\n    // leaving us with un-authenticated fetches from now on.\n    this.fetch = globalFetch;\n  };\n\n  getSessionInfo = async (\n    sessionId: string\n  ): Promise<(ISessionInfo & ISessionInternalInfo) | undefined> => {\n    // TODO complete\n    return this.sessionInfoManager.get(sessionId);\n  };\n\n  getAllSessionInfo = async (): Promise<ISessionInfo[]> => {\n    return this.sessionInfoManager.getAll();\n  };\n\n  validateCurrentSession = async (): Promise<\n    (ISessionInfo & ISessionInternalInfo) | null\n  > => {\n    const currentSessionId = window.localStorage.getItem(KEY_CURRENT_SESSION);\n    if (currentSessionId === null) {\n      return null;\n    }\n    const sessionInfo = await this.sessionInfoManager.get(currentSessionId);\n    // Several types of session data are required in order to validate that the ID\n    // token in storage hasn't been tampered with, and has actually been issued\n    // by the issuer present in storage.\n    if (\n      sessionInfo === undefined ||\n      sessionInfo.idToken === undefined ||\n      sessionInfo.clientAppId === undefined ||\n      sessionInfo.issuer === undefined\n    ) {\n      return null;\n    }\n    const issuerConfig = await this.issuerConfigFetcher.fetchConfig(\n      sessionInfo.issuer\n    );\n\n    try {\n      const jwk = await fetchJwks(issuerConfig.jwksUri, issuerConfig.issuer);\n      await jwtVerify(sessionInfo.idToken, await parseJwk(jwk), {\n        audience: sessionInfo.clientAppId,\n        issuer: issuerConfig.issuer,\n      });\n      return sessionInfo;\n    } catch (e) {\n      // The jwt verification function throws on invalid token.\n      // The error is swallowed, and `null` is eventually returned.\n    }\n    return null;\n  };\n\n  handleIncomingRedirect = async (\n    url: string,\n    eventEmitter: EventEmitter\n  ): Promise<ISessionInfo | undefined> => {\n    const redirectInfo = await this.redirectHandler.handle(url, eventEmitter);\n    // The `FallbackRedirectHandler` directly returns the global `fetch` for\n    // his value, so we should ensure it's bound to `window` rather than to\n    // ClientAuthentication, to avoid the following error:\n    // > 'fetch' called on an object that does not implement interface Window.\n    this.fetch = redirectInfo.fetch.bind(window);\n\n    const cleanedUpUrl = new URL(url);\n    cleanedUpUrl.searchParams.delete(\"state\");\n    // For auth code flow\n    cleanedUpUrl.searchParams.delete(\"code\");\n    // For implicit flow\n    cleanedUpUrl.searchParams.delete(\"id_token\");\n    cleanedUpUrl.searchParams.delete(\"access_token\");\n    // For login error\n    cleanedUpUrl.searchParams.delete(\"error\");\n    cleanedUpUrl.searchParams.delete(\"error_description\");\n\n    // Remove OAuth-specific query params (since the login flow finishes with\n    // the browser being redirected back with OAuth2 query params (e.g. for\n    // 'code' and 'state'), and so if the user simply refreshes this page our\n    // authentication library will be called again with what are now invalid\n    // query parameters!).\n    window.history.replaceState(null, \"\", cleanedUpUrl.toString());\n\n    return {\n      isLoggedIn: redirectInfo.isLoggedIn,\n      webId: redirectInfo.webId,\n      sessionId: redirectInfo.sessionId,\n      expirationDate: redirectInfo.expirationDate,\n    };\n  };\n}\n"},"lineCount":null}},"error":null,"hash":"70d3bcaf8dbe03455916ee78cdf178da","cacheData":{"env":{}}}